{"ast":null,"code":"import { createEffect, ofType } from '@ngrx/effects';\nimport { BooksApiActions } from './books.actions';\nimport { catchError, exhaustMap, map, tap } from 'rxjs/operators';\nimport { of } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"../book-list/books.service\";\nexport class BooksEffects {\n  constructor(actions$, booksService$) {\n    this.actions$ = actions$;\n    this.booksService$ = booksService$;\n    this.loadBooks$ = createEffect(() => this.actions$.pipe(ofType(BooksApiActions.loadBooks), exhaustMap(() => this.booksService$.getBooks().pipe(map(books => BooksApiActions.retrievedBookList({\n      books\n    })), catchError(error => of(BooksApiActions.errorLoading({\n      errorMsg: error.message\n    })))))));\n    this.displayErrorAlert$ = createEffect(() => this.actions$.pipe(ofType(BooksApiActions.errorLoading), tap(({\n      errorMsg\n    }) => console.log(errorMsg))));\n  }\n  static #_ = this.ɵfac = function BooksEffects_Factory(t) {\n    return new (t || BooksEffects)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.GoogleBooksService));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: BooksEffects,\n    factory: BooksEffects.ɵfac\n  });\n}","map":{"version":3,"names":["createEffect","ofType","BooksApiActions","catchError","exhaustMap","map","tap","of","BooksEffects","constructor","actions$","booksService$","loadBooks$","pipe","loadBooks","getBooks","books","retrievedBookList","error","errorLoading","errorMsg","message","displayErrorAlert$","console","log","_","i0","ɵɵinject","i1","Actions","i2","GoogleBooksService","_2","factory","ɵfac"],"sources":["/home/Matrix920/ngrx-store-effects/src/app/state/books.effects.ts"],"sourcesContent":["\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { GoogleBooksService } from '../book-list/books.service';\r\nimport { Injectable } from \"@angular/core\";\r\nimport { BooksApiActions } from './books.actions';\r\nimport { catchError, exhaustMap, map, tap } from 'rxjs/operators';\r\nimport { of } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class BooksEffects {\r\n \r\n  loadBooks$ = createEffect(() =>  \r\n    this.actions$.pipe(\r\n        ofType(BooksApiActions.loadBooks),\r\n        exhaustMap(() => this.booksService$.getBooks()\r\n          .pipe(\r\n              map(books => BooksApiActions.retrievedBookList({books})),\r\n              catchError((error: {message: string}) => \r\n                of(BooksApiActions.errorLoading({errorMsg: error.message})))\r\n          ))\r\n      ))\r\n    \r\n  displayErrorAlert$ = createEffect(() => \r\n    this.actions$.pipe(\r\n      ofType(BooksApiActions.errorLoading),\r\n      tap(({errorMsg}) => console.log(errorMsg))\r\n    )\r\n  )\r\n\r\n  constructor(\r\n    private actions$: Actions,\r\n    private booksService$: GoogleBooksService){\r\n    }\r\n\r\n}"],"mappings":"AACA,SAAkBA,YAAY,EAAEC,MAAM,QAAQ,eAAe;AAG7D,SAASC,eAAe,QAAQ,iBAAiB;AACjD,SAASC,UAAU,EAAEC,UAAU,EAAEC,GAAG,EAAEC,GAAG,QAAQ,gBAAgB;AACjE,SAASC,EAAE,QAAQ,MAAM;;;;AAGzB,OAAM,MAAOC,YAAY;EAoBvBC,YACUC,QAAiB,EACjBC,aAAiC;IADjC,KAAAD,QAAQ,GAARA,QAAQ;IACR,KAAAC,aAAa,GAAbA,aAAa;IApBvB,KAAAC,UAAU,GAAGZ,YAAY,CAAC,MACxB,IAAI,CAACU,QAAQ,CAACG,IAAI,CACdZ,MAAM,CAACC,eAAe,CAACY,SAAS,CAAC,EACjCV,UAAU,CAAC,MAAM,IAAI,CAACO,aAAa,CAACI,QAAQ,EAAE,CAC3CF,IAAI,CACDR,GAAG,CAACW,KAAK,IAAId,eAAe,CAACe,iBAAiB,CAAC;MAACD;IAAK,CAAC,CAAC,CAAC,EACxDb,UAAU,CAAEe,KAAwB,IAClCX,EAAE,CAACL,eAAe,CAACiB,YAAY,CAAC;MAACC,QAAQ,EAAEF,KAAK,CAACG;IAAO,CAAC,CAAC,CAAC,CAAC,CACjE,CAAC,CACL,CAAC;IAEN,KAAAC,kBAAkB,GAAGtB,YAAY,CAAC,MAChC,IAAI,CAACU,QAAQ,CAACG,IAAI,CAChBZ,MAAM,CAACC,eAAe,CAACiB,YAAY,CAAC,EACpCb,GAAG,CAAC,CAAC;MAACc;IAAQ,CAAC,KAAKG,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC,CAAC,CAC3C,CACF;EAKC;EAAC,QAAAK,CAAA,G;qBAvBQjB,YAAY,EAAAkB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,OAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,kBAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAZxB,YAAY;IAAAyB,OAAA,EAAZzB,YAAY,CAAA0B;EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}